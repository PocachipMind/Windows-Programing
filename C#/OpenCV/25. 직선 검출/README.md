# 직선 검출
영상이나 이미지에서 직선을 찾기위해 사용합니다.

단일 채널 이미지에서 HoughLines2 함수를 사용해 직선 검출

검출된 직선을 시작점과 도착점이나 rho와 theta값으로 반환할 수 있습니다.

허프변환은 다음과 같은 단계를 통하여 기본적인 검출 이미지를 생성합니다.

간단하게 형성한 검출 이미지 생성 단계는 다음과 같습니다.
1) 이진화 (Binary) 처리 : 이진화를 적용해 적절한 임계값에 따라 이미지를 단색화 합니다.
2) 모폴로지 ( Morphology ) 처리 - 팽창(Dilate), 침식(Erode) : 모폴로지 연산인 팽창과 침식을 통해 노이즈를 감소시키고 이미지를 선명하게 만듭니다.
3) 캐니엣지 ( Canny ) 처리 : 직선을 검출하기 쉽게 하기 위해 캐니엣지를 처리해 이미지의 외곽선만 남깁니다.
- 계산 이미지를 만들 때는 이미지를 깔끔하게 처리하는 것이 가장 중요
- 노이즈가 발생하거나 이미지가 깨지는 부분을 최소화해야합니다.
- HoughLines 함수 인수에 이상적인 값을 넣어도 계산 이미지가 깔끔하지 않다면 큰 문제가 발생합니다. ( 검출 불가 )
- 기본적인 데이터가 올바르지 않기 때문에 검출하고자 하는 직선을 제대로 검출할 수가 없습니다.

## 허프라인의 검출 방법
1) HoughLines2의 검출 방법은 모든 점들을 직선의 방정식을 생성
2) 이 직선의 방정식이 교차하는 점이 가장 많은 점을 기준으로 직선으로 판별

허프 변환의 결과 반환 방식은 크게 두 가지가 있습니다.

로와 세타를 반환하거나 시작점과 도착점을 반환하는 방법

시작점과 도착점을 반환하는 경우 좌표로 반환하기 때문에 쉽게 들어올 라인 등을 통하여 결과를 확인하실 수 있습니다.

로와 세타로 반환하는 경우에는 직접 수학공식을 적용해야 하기 때문에 rho와 theta로 직선을 검출하는 방법을 알아보겠습니다.

![image](https://github.com/user-attachments/assets/37449480-1bd3-47fe-a1e0-8f0f3ed9e811)

위 이미지에서 스케일 값은 매우 큰 값이나 적당한 값을 사용하여 이미지 일부에만 선이 그려지도록 하지 않는다.

## 허프라인 함수의 인수들이 미치는 영향
### 1. 검출 방법
- Standard : 검출된 rho와 theta 반환
- Probabilistic : 시작점과 끝점 반환
- MultiScale : 고전 허프 변환 방식으로 rho와 theta 반환

### 2. Rho의 범위 : 0~1 [1을 고정적으로 사용]
### 3. Theta의 범위 : 라디안 범위 [Pi/180을 고정적으로 사용]
### 4. 임계값 
검출 기준, 낮으면 정확도 낮은 선도 검출, 높으면 정확도 높은 선만 검출.

계산 이미지가 깔끔하다면 임계값을 높은 값을 사용하면 정확한 선만 검출할 수 있으며 계산 이미지가 깔끔하지 않다면 낮은 값을 사용하여 더 많은 선을 검출하면 됩니다.

### 5. 파라미터1 ( 이 파라미터는 검출 방법에 따라 의미가 달라집니다 )
- Standard : 사용하지 않음 [0을 고정적으로 사용]
- Probabilistic : 최소 선의 길이 ( 이 값보다 낮을 경우 검출하지 않습니다. )
- MultiScale : rho의 나눔수 [rho / 파라미터1]

### 6. 파라미터2 ( 이 파라미터는 검출 방법에 따라 의미가 달라집니다 )
- Standard : 사용하지 않음 [0을 고정적으로 사용]
- Probabilistic : 최대 선 간격 ( 이 간격보다 낮을 경우 검출하지 않습니다. )
- MultiScale : theta의 나눔수 [theta / 파라미터2]


## 직선검출 두 방법
로와 세타를 반환하여 삼각비 공식을 적용한 검출 결과와 시작점과 끝점을 반환했을 때의 결과

rho, theta : 주로 검출된 직선의 방정식이 필요할 때 사용하는 방법

시작점, 끝점 : 단순하게 검출된 직선의 좌표가 필요할때 사용하는 방식

> 검출 이미지를 더 깔끔하게 만드는 것이 가장 중요
