# 형식 변환

형식변환은 C#과 OpenCVSharp 에서 사용할 수 있는 이미지 형식을 변환하는데 사용합니다.

이미지 형식은 크게 3가지가있습니다.

- Bitmap, IplImage, CvMat

간단하게 설명하자면 확장자를 바꾸는 것과 의미가 동일합니다 ( jpg → png 등 )

표시되는 이미지는 달라지지 않지만 내부적으로 형식이 달라집니다.

### Bitmap = PictureBox

먼저 Bitmap은 PictureBox 컨트롤을 통하여 출력합니다.

C#에서 기본적으로 지원되는 이미지를 이곳에 담아 사용합니다.

### IplImage = PictureBoxIpl

여태 계속 사용했던 Ipl 이미지는 PictureBox Ipl 컨트롤을 통하여 출력합니다. 여기서 우리가 사용하지 않았던 CvMat 형식이 있습니다.

CvMat 형식은 따로 출력하는 픽쳐박스 컨트롤이 없습니다. 그러므로 CvMat 형식의 함수를 사용할 때 이미지 네이터는 비트맵이나 Ipl 이미지로 변환하여 출력하여야 합니다.

이 형식 변환을 사용하는 이유는 PictureBox에 Ipl 이미지를 출력하거나 CvMat 형식 등을 출력하기 위해 사용합니다.

역시 반대로 비트맥 형식을 픽쳐박스가 아닌 픽쳐박스 Ipl에 출력하거나 Ipl 형식의 함수나 메소드를 적용할 수 있습니다.

기본적으로 비트맵이나 IPL 이미지는 C#과 C# OpenCV를 이용하면서 많이 사용하여 어떤 의미를 가지는지 이해하고 있습니다.

### CvMat 형식

이번에는 CvMat 형식을 간단하게 이해하고 넘어가도록 하겠습니다.

CvMat 형식은 OpenCV 3 버전에서 CvMat 형식에서 Mat 형식으로 이름이 변경되어 대부분의 메소드와 함수는 Ipl이미지 형식이 아닌 Mat 형식을 사용하여 출력합니다.

IPL 이미지 형식이 없기 때문에 PictureBox IPL의 컨트롤도 존재하지 않습니다.

즉, PictureBox 컨트롤의 결과를 출력해야 합니다. 이때 이 형식 변환을 이용하여 출력합니다.

CvMat 형식은 멀티 채널 매트릭스를 의미합니다. IPL 이미지처럼 동일하게 이미지 형식입니다.

일반적으로 픽쳐박스(PictureBox) IPL 컨트롤을 지원하므로 이 컨트롤에 출력해도 됩니다.

하지만 이 형식 변환을 사용하는 이유 몇가지 알아보도록 하겠습니다.

1) 우리가 사용하는 OpenCV 2점대 버전에서도 CvMat형식이 존재하고 CvMat 형식을 지원하는 함수도 존재합니다. 이 함수를 사용하기 위해서 사용합니다.
2) OpenCV처럼 추가적인 패키지를 설치하여 프로그램을 구성할 때 사용합니다. 문자를 인식해주는 OCR 패키지에서는 비트맵 형식만을 인식합니다. 이때 OpenCV를 통하여 이미지를 편집한 프로그램을 문자 판독하기 위해서 비트맵 형식으로 변환시켜 적용합니다.
3) 비트맵 형식을 사용할 때 입니다. 비트맵 형식일 경우 OpenCV 함수를 적용할 수 없습니다. 이를 적용하기 위하여 형식 변환하여 사용합니다.

이 세가지 이유 이외에도 여러가지 환경으로 인하여 형식을 변환합니다. 
   

![image](https://github.com/user-attachments/assets/cc9b640d-d061-44ed-bc08-5ceb1aa4b6bb)



## 형식 변환

형식 변환은 비트맵에서 IPL 이미지, CvMat 두가지 모드로 변환할 수 있고 IPL 이미지와 CvMat도 동일하게 어떤 형식으로도 변환할 수 있습니다.

비트맵 형식으로 변환할 때 비트맵 확장자를 사용한다면 Drawing Namespace를 추가해야합니다.

또한 형식변환을 사용하기 위해서는 OpenCV에 포함되어있는 Extensions 네입스페이스를 추가해야합니다.

비트맵으로 변경할 때 비트맵 확장자를 사용하지 않는다면 Drawing 네임스페이스는 사용하지 않아도 되지만 형식변환을 사용한다면 Extensions 네임스페이스는 필수적으로 추가되어야 합니다.

![image](https://github.com/user-attachments/assets/5ff88840-4ca9-41fd-a877-fa8174cb8ce0)
