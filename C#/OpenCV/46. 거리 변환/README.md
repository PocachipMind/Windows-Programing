# 거리 변환
거리변환 함수는 이진화 이미지에서 하얀색 픽셀에서 가장 가까운 검은색 픽셀까지의 거리를 계산합니다.

불규칙하거나 노이즈가 심한 물체의 중심부를 확인하기 위해서 사용합니다.

손에 대한 정보를 얻기 위해서 이진화 처리를 할 경우 원본 이미지에서는 확인 할 수 없엇던 벽의 균열이나 노이즈등을 확인할 수 있고 노이즈를 제거하고 손의 형상만 남기기 위해서는 많은 함수가 포함되어야 합니다.

또한 노이즈로 인하여 손의 중심부를 정확한 좌표로 확인하기 위해선 연산 시간이나 처리 속도가 느려집니다.

이를 해결하기 위해서 거리 변환 함수를 사용합니다.

다음과 같이 하얀색 픽셀이 몰려있는 부분의 밝기가 강해지고 거리가 멀어질 수록 검은색 픽셀로 변경됩니다.


간단하게 가장 밝은 부분의 접혈을 확인한다면 다음과 같이 손바닥의 중심부에 표시됩니다.

가장 하얀색 픽셀이 높은 값이 손바닥의 중심부로 쉽게 찾을 수 있습니다.

![image](https://github.com/user-attachments/assets/693d870a-9433-4380-8836-f6710f1830b1)

이번에는 서로 붙어있는 물체를 구분하는 방법에 대해 확인해보겠습니다.

다음과 같이 서로 붙어있는 원형의 패턴이 있습니다.

이 이미지를 이진화 처리할 경우 다음과 같이 서로 붙어있어 라벨링 처리하거나 좌표를 확인하는 데에는 다소 어려움을 겪을 수 있습니다.

이미지에 거리 변환 함수를 적용한다면 다음과 같이 하얀색이 밀집되어 있는 부분으로 갈수록 밝아지고 주변은 점점 어두워집니다.

이곳에 다시 이진화 함수를 적용한다면 다음과 같이 분리되어 중심부 좌표나 라벨링하기 쉬운 상태로 분리됩니다.

![image](https://github.com/user-attachments/assets/1e76ecf0-ab35-4d64-89c0-854180afdc8f)

## 거리 변환 함수
Cv.DistTransform( 이진화 이미지, 결과 이미지, 거리 유형, 마스크 크기);

거리 변환 함수는 Cv.DistTransform을 사용하며 주요한 인수는 거리유형과 마스크 크기입니다.

거리 유형은 거리를 계산할 공식을 설정합니다. 거리를 계산하는 방법에는 여러가지 공식이 있습니다. 함수에서 지원하는 공식으로는 단순 거리나 유클리드 거리, 페어 방식, 외시 방식, 후버 방식 등을 사용할 수 있습니다.

이외의 공식은 사용자 정의 거리 공식을 생성하여 적용할 수 있습니다.

주로 L2인 유클리드 거리를 가장 많이 사용합니다.

다음으로 마스크 크기입니다. 거리 변환 마스크의 크기를 설정합니다.

이 크기는 0, 3, 5 만 사용할 수 있습니다.

0을 사용할 경우 마스크의 크기를 사용하지 않는다는 의미가 아닙니다.

마스크의 크기가 0이라면 계산을 아예 진행할 수 없습니다.

즉, 다른 비근사 알고리즘을 사용하여 계산합니다

3과 5는 3x3 또는 5x5 마스크를 사용합니다. 여기서 단순 거리 공식과 단순 거리 최대값 공식은 3만 사용할 수 있습니다.

![image](https://github.com/user-attachments/assets/f2ea656a-8d5c-45a8-9340-805cc1a19351)

